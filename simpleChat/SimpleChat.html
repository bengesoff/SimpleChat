<!DOCTYPE HTML>
<html>
<head>
<script src="simpleChat.js" type="text/javascript"></script>
<!-- *** Substitute your appliance domain name below *** -->
<script src="https://pabx1.ipcortex.net/api/wrapper.whtm" type="text/javascript"></script>
<script>

// *** Substitute a real username and password below ***
var Chat = new SimpleChat(null, null, statusCB, eventCB);

// Status callback - just insert anything we get into the <h2> in the body
function statusCB(status, code, reason){
	var status = document.getElementById('status');
	status.innerHTML=reason+" ("+code+")";
	Chat.getRoster(addressCB);

}

// Call event callback - we use the same callback for all three event types
//  and key off the first state parameter to work out what to do.
function eventCB(state, number, party, call, line){
	
}
function addressCB(roster){
	var address = document.getElementById('addressbook');
	var optiontext = "";
	roster.forEach((function (r){ optiontext += '<option>'+r.get('name')+'</option>';}));
	address.innerHTML="<select multiple>"+optiontext+"</select>";
	
}

</script>


<title>Simple Chat Test page</title>
</head>
<body>
	<h1>Simple Chat Test</h1>
	<p>This page displays the status and a google lookup of the phone number for any inbound or outbound call</p>

	<h2 id="status">API not initialised</h1>

	
	<h1 id="callstatus">Nothing doing</h1>
	<p id="addressbook"> </p>
	<iframe id="statuspanel" height="400" width="100%"></iframe>
</body>
</html>